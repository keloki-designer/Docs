**_Примечание._** _Настройку триггерных писем может выполнить пользователь с правами системного администратора._

Триггерное сообщение — это автоматическая рассылка, отправка которой инициируется определенным событием в системе. Например, отправка триггерного сообщения может запуститься в результате добавления новой записи в раздел BPMSoft. Таким образом, использование триггерных сообщений позволяет рассылать персонализированные SMS-сообщения, которые являются релевантными для данного клиента в данный момент времени.

Триггерное сообщение реализовано в виде элемента бизнес-процесса.

Для создания триггерной рассылки выполните следующие действия:

1. Перейдите в дизайнер системы.
    
    ![](https://samarasoft.com/wp-content/uploads/2018/04/%D1%82%D1%80%D0%B8%D0%B3%D0%B3%D0%B5%D1%80%D0%BD%D0%B0%D1%8F-%D1%81%D0%BC%D1%81-%D1%80%D0%B0%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B01.png)
    
2. Перейдите в библиотеку процессов.
3. Нажмите на кнопку [Добавить процесс].
4. Добавьте требуемые элементы бизнес процесса, которые необходимо выполнить до отправки триггерного SMS-сообщения.
5. Для отправки триггерного сообщения добавьте элемент [Отправить SMS] группы элементов [Действия пользователя].
    
    ![](https://samarasoft.com/wp-content/uploads/2018/04/%D1%82%D1%80%D0%B8%D0%B3%D0%B3%D0%B5%D1%80%D0%BD%D0%B0%D1%8F-%D1%81%D0%BC%D1%81-%D1%80%D0%B0%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B0-2-%D0%B8-3.png)
    
6. Укажите параметры элемента [Отправить SMS]:
    - [Контакт] – получатель сообщения из списка контактов. Вы можете указать конкретное значение справочника [Контакты] или текущий контакт, передать параметр процесса, значение системной настройки или формулу;
    - [Провайдер] – провайдер, используемый для отправки сообщений;
    - [Имя отправителя] – имя отправителя, которое будет отображаться при отправке SMS-сообщений на экране телефона получателя;
    - [Текст] – текст SMS-сообщения, в котором можно использовать макросы для персонализации сообщений;
    - [Отправлять на мобильный телефон] – обязательный для заполнения признак, при установке которого в значение [Да] сообщение будет отправлено на один из номеров, указанный в поле [Мобильный телефон] на странице контакта. По умолчанию заполнен значением [True];
    - [Отправлять на рабочий телефон] – обязательный для заполнения признак, при установке которого в значение [Да] сообщение будет отправлено на один из номеров, указанный в поле [Другой телефон] на странице контакта. По умолчанию заполнен значением [False];
    - [Отправлять на другой телефон] – обязательный для заполнения признак, при установке которого в значение [Да] сообщение будет отправлено на один из номеров, указанный в поле [Другой телефон] на странице контакта. По умолчанию заполнен значением [False];
    - [Использовать все телефоны] – логическое поле, признак, при установке которого сообщения будут отправляться на все указанные на странице контакта телефоны выбранного типа. По умолчанию заполнен значением [False].
        
        ![](https://samarasoft.com/wp-content/uploads/2018/04/%D1%82%D1%80%D0%B8%D0%B3%D0%B3%D0%B5%D1%80%D0%BD%D0%B0%D1%8F-%D1%81%D0%BC%D1%81-%D1%80%D0%B0%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B0-2-%D0%B8-3-1.png)
        
        **_  
        Примечание_**
        
        _При установке признака [Использовать все телефоны] = [Нет] И установлении одного или нескольких признаков – [Отправлять на другой телефон], [Отправлять на мобильный телефон], [Отправлять на рабочий телефон] – сообщение отправится только на один телефон каждого из выбранных типов, даже если на странице контакта указано, например, два мобильных телефона._
        
        _Если установить признака [Использовать все телефоны] = [Да], сообщения отправятся на все указанные на странице контакта телефоны выбранных типов._
        

Считывание записей телефонов происходит с детали «Средства связи» контакта.